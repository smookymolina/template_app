{% extends "base.html" %}

{% block content %}
<!-- Sección de inicio de sesión -->
<div id="login-section">
    <div class="login-card">
        <div class="card-header">
            <i class="fas fa-user-lock"></i>
            <h2>Acceso Reclutadores</h2>
        </div>
        
        <form id="login-form">
            <div class="form-group">
                <label for="email">Correo electrónico</label>
                <div class="input-icon-wrapper">
                    <i class="fas fa-envelope"></i>
                    <input type="email" id="email" placeholder="Ingresa tu correo electrónico" required>
                </div>
            </div>
            
            <div class="form-group">
                <label for="password">Contraseña</label>
                <div class="input-icon-wrapper">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="password" placeholder="Ingresa tu contraseña" required>
                    <button type="button" id="toggle-password" class="toggle-password">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
            </div>
            
            <div class="remember-forgot">
                <div class="checkbox-container">
                    <input type="checkbox" id="remember-me">
                    <label for="remember-me">Recordarme</label>
                </div>
                <a href="#" class="forgot-password">¿Olvidaste tu contraseña?</a>
            </div>
            
            <button type="submit" id="login-button" class="btn-primary">
                <i class="fas fa-sign-in-alt"></i> Iniciar Sesión
            </button>
        </form>
        
        <!-- Botón para acceso de clientes -->
        <div class="login-divider">
            <span>o</span>
        </div>
        
        <button id="cliente-button" class="btn-secondary">
            <i class="fas fa-user"></i> Acceso para Clientes
        </button>
    </div>
</div>

<!-- Sección del dashboard (visible después del inicio de sesión) -->
<div id="dashboard-section" style="display:none;">
    <div class="dashboard-header">
        <div class="profile-section">
            <div class="profile-pic-container">
                <img id="dashboard-profile-pic" class="profile-pic" src="/api/placeholder/100/100" alt="Foto de perfil">
                <div class="profile-pic-overlay">
                    <label for="profile-upload" class="profile-pic-edit">
                        <i class="fas fa-camera"></i>
                    </label>
                    <input type="file" id="profile-upload" accept="image/*" style="display: none;">
                </div>
            </div>
            <div class="profile-info">
                <h2>Bienvenido, <span id="gerente-name"></span></h2>
                <p class="profile-role">Gerente de Reclutamiento</p>
            </div>
        </div>
        
        <!-- Menú de navegación del dashboard -->
        <nav class="dashboard-nav">
    <ul>
        <li class="active"><a href="#" data-section="reclutas-section"><i class="fas fa-users"></i> Reclutas</a></li>
        <li><a href="#" data-section="estadisticas-section"><i class="fas fa-chart-bar"></i> Estadísticas</a></li>
        <li><a href="#" data-section="calendario-section"><i class="fas fa-calendar-alt"></i> Calendario</a></li>
        <li><a href="#" data-section="configuracion-section"><i class="fas fa-cog"></i> Configuración</a></li>
        <li><a href="#" data-section="timeline-section"><i class="fas fa-stream"></i> Estado</a></li>
    </ul>
</nav>
        
        <!-- Dropdown de perfil -->
        <div class="profile-dropdown">
            <button class="profile-dropdown-button" id="profile-dropdown-button">
                <i class="fas fa-user-circle"></i>
                <span id="dropdown-user-name">Usuario</span>
                <i class="fas fa-chevron-down"></i>
            </button>
            <div class="dropdown-content" id="profile-dropdown-content">
                <a href="#" data-section="configuracion-section"><i class="fas fa-user-cog"></i> Mi perfil</a>
                <a href="#" data-section="configuracion-section"><i class="fas fa-sliders-h"></i> Preferencias</a>
                <a href="#" id="help-link"><i class="fas fa-question-circle"></i> Ayuda</a>
                <div class="dropdown-divider"></div>
                <a href="#" id="logout-button"><i class="fas fa-sign-out-alt"></i> Cerrar Sesión</a>
            </div>
        </div>
    </div>
    
    <!-- Contenedor principal de las secciones del dashboard -->
    <div class="dashboard-content">
        {% include "components/seccion_reclutas.html" %}
        {% include "components/seccion_estadisticas.html" %}
        {% include "components/seccion_calendario.html" %}
        {% include "components/seccion_configuracion.html" %}
        {% include "components/seccion_timeline.html" %}
    </div>
</div>
{% endblock %}

{% block modals %}
{% include "components/modals.html" %}

<!-- Modal para acceso de clientes -->
<div id="cliente-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Acceso para Clientes</h3>
            <span class="close-modal">&times;</span>
        </div>
        
        <div class="modal-body">
            <form id="tracking-form">
                <div class="form-group">
                    <label for="folio">Folio de Seguimiento</label>
                    <div class="input-icon-wrapper">
                        <i class="fas fa-file-alt"></i>
                        <input type="text" id="folio" placeholder="Ingresa tu folio de seguimiento" required>
                    </div>
                </div>
                
                <p class="modal-info">
                    <i class="fas fa-info-circle"></i> Ingresa el folio proporcionado para dar seguimiento a tu proceso de contratación.
                </p>
            </form>
            
            <!-- Contenedor para mostrar los resultados (inicialmente oculto) -->
            <div id="tracking-results" style="display: none;">
                <!-- Los resultados se cargarán dinámicamente aquí -->
            </div>
        </div>
        
        <div class="modal-footer">
            <button class="btn-secondary close-modal-btn">
                <i class="fas fa-times"></i> Cancelar
            </button>
            <button class="btn-primary" id="consultar-folio-btn">
                <i class="fas fa-search"></i> Consultar
            </button>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
    // Script para el modal de clientes
    document.addEventListener('DOMContentLoaded', function() {
        const clienteButton = document.getElementById('cliente-button');
        const clienteModal = document.getElementById('cliente-modal');
        const closeModalBtns = clienteModal.querySelectorAll('.close-modal, .close-modal-btn');
        
        // Abrir modal de cliente
        clienteButton.addEventListener('click', function() {
            clienteModal.style.display = 'block';
        });
        
        // Cerrar modal
        closeModalBtns.forEach(function(btn) {
            btn.addEventListener('click', function() {
                clienteModal.style.display = 'none';
            });
        });
        
        // Cerrar al hacer clic fuera del contenido
        window.addEventListener('click', function(event) {
            if (event.target === clienteModal) {
                clienteModal.style.display = 'none';
            }
        });
        
        // Consultar folio
        const consultarFolioBtn = document.getElementById('consultar-folio-btn');
        consultarFolioBtn.addEventListener('click', function() {
            const folio = document.getElementById('folio').value;
            if (!folio) {
                showNotification('Por favor, ingresa un folio', 'warning');
                return;
            }
            
            // Aquí iría la lógica para consultar el folio
            showNotification('Consultando folio...', 'info');
            
            // Simulación de consulta (esto sería reemplazado por la llamada a la API)
            setTimeout(function() {
                showNotification('Folio consultado correctamente', 'success');
                clienteModal.style.display = 'none';
            }, 1500);
        });
    });
</script>
{% endblock %}